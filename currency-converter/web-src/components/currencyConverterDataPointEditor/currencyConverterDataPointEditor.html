<h3>
    <span ma-tr="cc.datapoint.description"></span>
    <md-button class="md-icon-button ma-small-button ma-no-margin" ui-sref="ui.help.currencyConverterDataPoint">
        <md-icon>help</md-icon>
    </md-button>
</h3>

<div layout="row" layout-wrap layout-align="space-between start" class="ma-inputs-container">
    <div flex="100" flex-gt-md="50">
        <md-checkbox ma-flatten-values="false" class="ma-margin-input-container" name="settable" ng-model="$ctrl.dataPoint.pointLocator.settable">
            <span ma-tr="dsEdit.settable"></span>
        </md-checkbox>
    </div>

    <md-input-container flex="100" flex-gt-md="50">
        <md-icon>attach_money</md-icon>
        <label ma-tr="cc.datapoint.initialValue"></label>
        <input name="initialValue" ng-model="$ctrl.dataPoint.pointLocator.initialValue" required
            ma-get-ctrl="initialValueModelCtrl = $ngModel" ng-disabled="!$ctrl.dataPoint.pointLocator.settable">
        <div ng-messages="initialValueModelCtrl.$error">
            <div ng-message="required" ma-tr="validate.required"></div>
            <div ng-message="validationMessage" ng-bind="initialValueModelCtrl.validationMessage"></div>
        </div>
    </md-input-container>

    <div flex="100" layout="row" layout-wrap layout-align="space-between center">
        <md-input-container flex="100" flex-gt-sm="45">
            <label ma-tr="cc.datapoint.fromCurrency"></label>
            <ma-drop-down-button>
            <span ng-if="$ctrl.fromCurrency != null" class="ma-ellipsis">
                <span ng-bind="$ctrl.fromCurrency.currencyName"></span>
                (<em ng-bind="$ctrl.fromCurrency.id"></em>)
            </span>

                <ma-drop-down auto-focus="::false">
                    <ma-option-list name="fromCurrency" ng-model="$ctrl.fromCurrency"
                                    items="$ctrl.currencyList | maFilter:$filter" ng-change="$ctrl.setToDp('fromCurrency')"
                                    has-value="$value !== undefined" ma-configure-input-container>
                        <ma-option ng-repeat="currency in $items" ng-value="currency">
                        <span class="ma-ellipsis">
                            <span md-highlight-text="$filter" md-highlight-flags="ig">{{currency.currencyName}}</span>
                            (<em md-highlight-text="$filter" md-highlight-flags="ig">{{currency.id}}</em>)
                        </span>
                        </ma-option>
                    </ma-option-list>
                </ma-drop-down>
            </ma-drop-down-button>
        </md-input-container>

        <md-icon>arrow_forward</md-icon>

        <md-input-container flex="100" flex-gt-sm="45">
            <label ma-tr="cc.datapoint.toCurrency"></label>
            <ma-drop-down-button>
            <span ng-if="$ctrl.toCurrency != null" class="ma-ellipsis">
                <span ng-bind="$ctrl.toCurrency.currencyName"></span>
                (<em ng-bind="$ctrl.toCurrency.id"></em>)
            </span>

                <ma-drop-down auto-focus="::false">
                    <ma-option-list name="toCurrency" ng-model="$ctrl.toCurrency"
                                    items="$ctrl.currencyList | maFilter:$filter" ng-change="$ctrl.setToDp('toCurrency')"
                                    has-value="$value !== undefined" ma-configure-input-container>
                        <ma-option ng-repeat="currency in $items" ng-value="currency"
                                   ng-disabled="currency.id === $ctrl.fromCurrency.id">
                        <span class="ma-ellipsis">
                            <span md-highlight-text="$filter" md-highlight-flags="ig">{{currency.currencyName}}</span>
                            (<em md-highlight-text="$filter" md-highlight-flags="ig">{{currency.id}}</em>)
                        </span>
                        </ma-option>
                    </ma-option-list>
                </ma-drop-down>
            </ma-drop-down-button>
        </md-input-container>
    </div>

    <div flex="100" flex-gt-md="50">
        <md-checkbox ma-flatten-values="false" class="ma-margin-input-container" name="settable" ng-model="$ctrl.showCurrencyUnit" ng-change="$ctrl.setSuffix()">
            <span ma-tr="cc.datapoint.showUnit"></span>
        </md-checkbox>
    </div>
</div>